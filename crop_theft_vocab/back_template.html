{{FrontSide}}

<hr>

<div lang="ja">
  <div lang="ja" class="size50" id="reading">{{Reading}}</div>
  <div class="size30" id="pitch_pattern">{{PitchPattern}}</div>
  <details>
    <summary></summary>
    <div class="size20" id="example_sentence">{{furigana:Example Sentence}}</div>
    <div id="notes">{{Notes}}</div>
    {{Audio}}
  </details>
  <div id="definition-wrapper">
    <div id="definition">{{Definition}}</div>
  </div>
</div>



<script>
  //Force multiple pitch accents from jidoujisho to be on the same line
  document.getElementById("pitch_pattern").innerHTML = document.getElementById("pitch_pattern").innerHTML.replaceAll("<br>", " ");

  //Force multiple pitch accents from yomitan to be on the same line
  document.getElementById("pitch_pattern").innerHTML = document.getElementById("pitch_pattern").innerHTML.replaceAll("<ol>", "").replaceAll("<li>", " ");

  //Delete "Example Sentence" if it equals "Example Target"
  if (`{{Example Sentence}}` == `{{Example Target}}`) {
    document.getElementById("example_sentence").remove();
  }

  //Delete "Reading" if it equals "Word"
  if (`{{Reading}}` == `{{Word}}`) {
    document.getElementById("reading").remove();
  }

  //Add underline to "Word" or "Example Target" in "Example Sentence"
  document.getElementById("example_sentence").innerHTML = document.getElementById("example_sentence").innerHTML.replaceAll("{{Word}}", "<span class=\"red_underline\">{{Word}}</span>");
  if (`{{Example Target}}`.length > 0) {
    document.getElementById("example_sentence").innerHTML = document.getElementById("example_sentence").innerHTML.replaceAll("{{Example Target}}", "<span class=\"red_underline\">{{Example Target}}</span>");
  }

  //Link evaluator for notes
  if (document.getElementById("notes").innerHTML.length > 0) {
    document.getElementById("notes").innerHTML = document.getElementById("notes").innerHTML.replaceAll(/(?<!href=\")(?:http|ftp)s?:\/\/(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+(?:[A-Z]{2,6}\.?|[A-Z0-9-]{2,}\.?)|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?(?:\/?|[/?]\S+)(.*?(?=(\s|$)))(?!.*<a>)/gi, function(match) {
      return "<a href=\"" + match + "\">" + match + "<a>"
    });
  }
</script>
